<!DOCTYPE html>
<html lang="en">
<head>
<!-- Jun 16, 2022 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="author" content="zwpdbh" />
<meta name="generator" content="Org Mode" />
<link rel='icon' type='image/x-icon' href='/images/favicon.ico'/>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<link rel='stylesheet' href='https://code.cdn.mozilla.net/fonts/fira.css'>
<link rel='stylesheet' href='/css/site.css?v=2' type='text/css'/>
<link rel='stylesheet' href='/css/custom.css' type='text/css'/>
<link rel='stylesheet' href='/css/syntax-coloring.css' type='text/css'/>
<script>
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../"> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><header id="top" class="status">
<div class="intro">
  <img
    src="/images/Lisplogo_alien_256.png"
    alt="Land of Lisp"
    class="no-border"
  />
  <h1>
    <span class="gray">Zhao</span>
    <span class="black">Wei</span>
  </h1>
  <p>
    How can man die better than facing fearful odds, for the ashes of his
    fathers and the temples of his Gods? -- By Horatius.
  </p>
</div>

<div class="nav">
  <ul>
    <li><a href="/">Posts</a>.</li>
    <li><a href="/about/">About</a>.</li>
  </ul>
</div>
</header>
<main id="content" class="content">
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orge26b494">1. Overview of Lisp</a>
<ul>
<li><a href="#org9a357cd">1.1. Guide to lisp style</a></li>
<li><a href="#orge08b411">1.2. Special forms</a>
<ul>
<li><a href="#orgf4858e2">1.2.1. Special forms for definitions</a></li>
<li><a href="#org36f9b9e">1.2.2. Special forms for conditionals</a></li>
<li><a href="#org4672efb">1.2.3. Special forms for dealing with variables and places</a></li>
<li><a href="#org0f05a57">1.2.4. Functions and Special forms for repeatation</a></li>
<li><a href="#orgdd09fdf">1.2.5. Other special forms</a></li>
<li><a href="#org9fa9e31">1.2.6. Macro</a></li>
<li><a href="#orgd0f638e">1.2.7. Backquote notation</a></li>
</ul>
</li>
<li><a href="#org85331ba">1.3. Functions on Lists</a>
<ul>
<li><a href="#orga008127">1.3.1. Dotted pair notation</a></li>
</ul>
</li>
<li><a href="#org893a85e">1.4. Equality and internal representation</a></li>
<li><a href="#orgb3c8779">1.5. Functions on sequences</a></li>
<li><a href="#orgee699cc">1.6. Functions for maintaining tables</a>
<ul>
<li><a href="#org1635f44">1.6.1. Association table</a></li>
<li><a href="#org48a9d31">1.6.2. Hash table</a></li>
<li><a href="#org4a89d46">1.6.3. Property list</a></li>
</ul>
</li>
<li><a href="#org9d04c5d">1.7. Functions on trees</a></li>
<li><a href="#org4572ff5">1.8. Functions on numbers</a></li>
<li><a href="#orgf8a65e4">1.9. Functions on sets</a></li>
<li><a href="#orgfad1d8d">1.10. Destructive functions</a></li>
<li><a href="#org63e3e78">1.11. 3.11 Overview of data types</a></li>
<li><a href="#org61653c4">1.12. Input/output</a>
<ul>
<li><a href="#org3f20d6f">1.12.1. Input</a></li>
<li><a href="#org36d9d40">1.12.2. Output</a></li>
</ul>
</li>
<li><a href="#org796c8b5">1.13. 3.13 debugging tools</a></li>
<li><a href="#org6f9a58c">1.14. 3.14 Antibugging tools</a></li>
<li><a href="#orga8a2bab">1.15. Evaluation</a></li>
<li><a href="#org8e9e3eb">1.16. 3.16 Closure</a></li>
<li><a href="#org210ec37">1.17. 3.17 special variables</a></li>
<li><a href="#orgeec0451">1.18. 3.18 Multiple values</a></li>
<li><a href="#org7c1b1db">1.19. 3.19 More about parameters</a>
<ul>
<li><a href="#org43ec9da">1.19.1. Optional arguments</a></li>
<li><a href="#orgf818b7d">1.19.2. Key arguments</a></li>
<li><a href="#org2dfd1e7">1.19.3. Summary</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org37f7800">2. <span class="todo TODO">TODO</span> Exercises</a></li>
</ul>
</div>
</nav>
<section id="outline-container-orge26b494" class="outline-2">
<h2 id="orge26b494"><span class="section-number-2">1.</span> Overview of Lisp</h2>
<div class="outline-text-2" id="text-1">
<p>
This chapter can be used as a reference source.<br>
</p>
</div>

<div id="outline-container-org9a357cd" class="outline-3">
<h3 id="org9a357cd"><span class="section-number-3">1.1.</span> Guide to lisp style</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Be specific.<br></li>
<li>Use abstractions.<br></li>
<li>Be concise.<br></li>
<li>Use the provided tools.<br></li>
<li>Don&rsquo;t be obscure.<br></li>
<li>Be consistent.<br></li>
</ul>
</div>
</div>

<div id="outline-container-orge08b411" class="outline-3">
<h3 id="orge08b411"><span class="section-number-3">1.2.</span> Special forms</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-orgf4858e2" class="outline-4">
<h4 id="orgf4858e2"><span class="section-number-4">1.2.1.</span> Special forms for definitions</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>defun<br></li>
<li>defmacro<br></li>
<li>defvar<br></li>
<li>defparameter<br></li>
<li>defconstant<br></li>
<li>defstruct<br></li>
</ul>
</div>
</div>
<div id="outline-container-org36f9b9e" class="outline-4">
<h4 id="org36f9b9e"><span class="section-number-4">1.2.2.</span> Special forms for conditionals</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
It is poor style to use <code>and</code> and <code>or</code> for anything other than testing a logical condition. Use <code>when, unless, if</code> if possible.<br>
</p>
<ul class="org-ul">
<li>when<br></li>
<li>unless<br></li>
<li>and<br></li>
<li>or<br></li>
<li>case<br></li>
</ul>
</div>
</div>
<div id="outline-container-org4672efb" class="outline-4">
<h4 id="org4672efb"><span class="section-number-4">1.2.3.</span> Special forms for dealing with variables and places</h4>
<div class="outline-text-4" id="text-1-2-3">
<ul class="org-ul">
<li><p>
setf<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(setf (rest list) nil)
</pre>
</div></li>
<li>let<br></li>
<li><p>
let*<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">let*</span> ((x 6)
       (y (* x x)))
  (+ x y))
</pre>
</div></li>
<li>treat list as stack: pop, push<br></li>
<li>(incf x) = (incf x 1) = (setf x (+ x 1))<br></li>
<li>(decf x) = (decf x 1) = (setf x (- x 1))<br></li>
</ul>
</div>
</div>

<div id="outline-container-org0f05a57" class="outline-4">
<h4 id="org0f05a57"><span class="section-number-4">1.2.4.</span> Functions and Special forms for repeatation</h4>
<div class="outline-text-4" id="text-1-2-4">
<ul class="org-ul">
<li>dolist<br></li>
<li>dotimes<br></li>
<li>do, do*<br></li>
<li>loop<br></li>
<li>mapc, mapcar<br></li>
<li>some, every<br></li>
<li>find, reduce, remove<br></li>
<li>member<br></li>
<li>count<br></li>
<li>delete<br></li>
<li>position<br></li>
<li>substitute<br></li>
<li><b>recursion</b><br></li>
</ul>
</div>
</div>

<div id="outline-container-orgdd09fdf" class="outline-4">
<h4 id="orgdd09fdf"><span class="section-number-4">1.2.5.</span> Other special forms</h4>
<div class="outline-text-4" id="text-1-2-5">
<ul class="org-ul">
<li><code>progn</code>, can be used to evaluate a sequence of forms and return the value of the last one.<br>
Not used very much, probably only needed in 3 places<br></li>
<li><code>'x</code> for <code>(quote x)</code><br></li>
<li><code>#'f</code> for <code>(function f)</code><br></li>
<li>trace and untrace<br></li>
<li><code>return</code> can be used to break out of a block of code<br></li>
</ul>
</div>
</div>

<div id="outline-container-org9fa9e31" class="outline-4">
<h4 id="org9fa9e31"><span class="section-number-4">1.2.6.</span> Macro</h4>
<div class="outline-text-4" id="text-1-2-6">
<p>
4 steps to write macro:<br>
</p>
<ol class="org-ol">
<li>Decide if the macro is really necesary.<br></li>
<li>Write down the syntax of the macro.<br></li>
<li>Figure out what the macro should expand into.<br></li>
<li>Use <code>defmacro</code> to implement the syntax/expansion correspondence.<br></li>
</ol>
</div>
</div>

<div id="outline-container-orgd0f638e" class="outline-4">
<h4 id="orgd0f638e"><span class="section-number-4">1.2.7.</span> Backquote notation</h4>
<div class="outline-text-4" id="text-1-2-7">
<p>
A backquote indicates that what follows is mostly a literal expression but may contain some components that are to be evaluated. Anything marked by a leading comma <code>,</code> is evaluated and inserted into the structure. And anything marked with a leading <code>,@</code> must evaluated to a list that is spliced into the structure: each element of the list is inserted, without the top-level parameters.<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(setf test1 '(a test))

`(this is ,test1)
`(this is ,@test1)
`(this is . ,test1)
<span class="org-comment-delimiter">;; </span><span class="org-comment">In the middle of a list, only ,@ is a possibility.</span>
`(this is ,@test1 -- this is only ,@test1)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org85331ba" class="outline-3">
<h3 id="org85331ba"><span class="section-number-3">1.3.</span> Functions on Lists</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>first<br></li>
<li>second<br></li>
<li>third<br></li>
<li>nth<br></li>
<li>rest<br></li>
<li>car<br></li>
<li>cdr<br></li>
<li>last<br></li>
<li>length<br></li>
<li>reverse<br></li>
<li>append<br></li>
<li>list<br></li>
<li>list*<br></li>
<li>null<br></li>
<li>listp<br></li>
<li>consp<br></li>
<li>equal<br></li>
<li>sort<br></li>
<li>subseq<br></li>
</ul>
</div>

<div id="outline-container-orga008127" class="outline-4">
<h4 id="orga008127"><span class="section-number-4">1.3.1.</span> Dotted pair notation</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
(cons a b)<br>
</p>
<ol class="org-ol">
<li>When b is not a list. The result is an object x such that (first x) =&gt; a and (rest x) =&gt; b and where x prints as (a . b).<br></li>
<li>When b is a list, the usual list notation is used for output rather than the dotted pair notation.<br></li>
</ol>
<p>
Either notation can be used for input.<br>
</p>

<p>
A <b>cons cell</b> is a data structure with two fields: a first and a rest. All proper lists have a last cons cell whose rest field is nil.<br>
</p>
</div>
</div>
</div>


<div id="outline-container-org893a85e" class="outline-3">
<h3 id="org893a85e"><span class="section-number-3">1.4.</span> Equality and internal representation</h3>
</div>

<div id="outline-container-orgb3c8779" class="outline-3">
<h3 id="orgb3c8779"><span class="section-number-3">1.5.</span> Functions on sequences</h3>
</div>

<div id="outline-container-orgee699cc" class="outline-3">
<h3 id="orgee699cc"><span class="section-number-3">1.6.</span> Functions for maintaining tables</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-org1635f44" class="outline-4">
<h4 id="org1635f44"><span class="section-number-4">1.6.1.</span> Association table</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
The association list (a-list) is a type of list used to implement tables. An association list is a list of dotted pairs, where each pair consists of a key and a value.<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(setf state-table
      '((AL . Alabama) (AK . Alaska) (AZ . Arizona) (AR . Arkansas)))

(assoc 'AK state-table)
(rassoc 'Arizona state-table)
</pre>
</div>

<p>
But, dotted pairs could also be normal list.<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(setf state-table
      '((AL  Alabama) (AK  Alaska) (AZ  Arizona) (AR  Arkansas)))
(assoc 'ar state-table)
<span class="org-comment-delimiter">;; </span><span class="org-comment">this does work</span>
(rassoc 'Arizona state-table)
</pre>
</div>
<p>
Notice: Search the table by value rather than by key doesn&rsquo;t work for normal list.<br>
</p>
</div>
</div>


<div id="outline-container-org48a9d31" class="outline-4">
<h4 id="org48a9d31"><span class="section-number-4">1.6.2.</span> Hash table</h4>
<div class="outline-text-4" id="text-1-6-2">
<ul class="org-ul">
<li>make-hash-table<br></li>
<li>gethash, retrieve the value associated with a given key.<br></li>
</ul>
</div>
</div>

<div id="outline-container-org4a89d46" class="outline-4">
<h4 id="org4a89d46"><span class="section-number-4">1.6.3.</span> Property list</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
A property list (p-list) is a list of alternating key/value pairs.<br>
It is avoided because we have hash table.<br>
</p>
</div>
</div>
</div>


<div id="outline-container-org9d04c5d" class="outline-3">
<h3 id="org9d04c5d"><span class="section-number-3">1.7.</span> Functions on trees</h3>
<div class="outline-text-3" id="text-1-7">
<ul class="org-ul">
<li>tree-equal<br></li>
<li>copy-tree<br></li>
<li>subst<br></li>
<li>sublis<br></li>
</ul>
</div>
</div>

<div id="outline-container-org4572ff5" class="outline-3">
<h3 id="org4572ff5"><span class="section-number-3">1.8.</span> Functions on numbers</h3>
<div class="outline-text-3" id="text-1-8">
<ul class="org-ul">
<li>random<br></li>
<li>expt<br></li>
<li>sin<br></li>
<li>asin<br></li>
<li>min<br></li>
<li>abs<br></li>
<li>sqrt<br></li>
<li>round<br></li>
<li><p>
rem<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(rem 11 5)
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgf8a65e4" class="outline-3">
<h3 id="orgf8a65e4"><span class="section-number-3">1.9.</span> Functions on sets</h3>
<div class="outline-text-3" id="text-1-9">
<p>
One of the important uses of lists is to represent sets. There are some functions that treat lists in just that way.<br>
</p>
<ul class="org-ul">
<li>intersection<br></li>
<li>union<br></li>
<li>set-difference<br></li>
<li>member<br></li>
<li>subsetp<br></li>
<li>adjoin<br></li>
</ul>

<p>
Functions on bit vectors and integers:<br>
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">lists</th>
<th scope="col" class="org-left">integers</th>
<th scope="col" class="org-left">bit vectors</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">intersection</td>
<td class="org-left">logand</td>
<td class="org-left">bit-and</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">union</td>
<td class="org-left">logior</td>
<td class="org-left">bit-ior</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">set-difference</td>
<td class="org-left">logandc2</td>
<td class="org-left">bit-andc2</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">member</td>
<td class="org-left">logbitp</td>
<td class="org-left">bit</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">length</td>
<td class="org-left">logcount</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgfad1d8d" class="outline-3">
<h3 id="orgfad1d8d"><span class="section-number-3">1.10.</span> Destructive functions</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Functions has side effect<br>
</p>
<ul class="org-ul">
<li>nconc<br></li>
<li>nreverse<br></li>
<li>nintersection<br></li>
<li>nunion<br></li>
<li>nset-difference<br></li>
<li>nsubst<br></li>
<li>delete, the destructive version of <code>remove</code>.<br></li>
</ul>
</div>
</div>


<div id="outline-container-org63e3e78" class="outline-3">
<h3 id="org63e3e78"><span class="section-number-3">1.11.</span> 3.11 Overview of data types</h3>
</div>


<div id="outline-container-org61653c4" class="outline-3">
<h3 id="org61653c4"><span class="section-number-3">1.12.</span> Input/output</h3>
<div class="outline-text-3" id="text-1-12">
</div>
<div id="outline-container-org3f20d6f" class="outline-4">
<h4 id="org3f20d6f"><span class="section-number-4">1.12.1.</span> Input</h4>
<div class="outline-text-4" id="text-1-12-1">
<ul class="org-ul">
<li>read, it is a complete lexical and syntactic parser. It is used to read and return a single lisp expression.<br></li>
<li>read-char, read a single character<br></li>
<li>read-line, read everything up to the next newline and returns it as a string.<br></li>
<li>open<br></li>
<li>with-open-stream<br></li>
</ul>
</div>
</div>

<div id="outline-container-org36d9d40" class="outline-4">
<h4 id="org36d9d40"><span class="section-number-4">1.12.2.</span> Output</h4>
<div class="outline-text-4" id="text-1-12-2">
<ul class="org-ul">
<li>print<br></li>
<li>prin1<br></li>
<li>princ<br></li>
<li>write<br></li>
<li>with-open-file<br></li>
<li>terpri<br></li>
<li>fresh-line<br></li>
<li>format<br></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org796c8b5" class="outline-3">
<h3 id="org796c8b5"><span class="section-number-3">1.13.</span> 3.13 debugging tools</h3>
<div class="outline-text-3" id="text-1-13">
<ul class="org-ul">
<li>trace, untrace<br></li>
<li>step<br></li>
<li>describe<br></li>
<li>inspect<br></li>
<li>documentation<br></li>
<li>apropos<br></li>
<li>break<br></li>
</ul>
</div>
</div>


<div id="outline-container-org6f9a58c" class="outline-3">
<h3 id="org6f9a58c"><span class="section-number-3">1.14.</span> 3.14 Antibugging tools</h3>
<div class="outline-text-3" id="text-1-14">
<ul class="org-ul">
<li>error<br></li>
<li>cerror<br></li>
<li>check-type<br></li>
<li>assert<br></li>
<li>time<br></li>
</ul>
</div>
</div>

<div id="outline-container-orga8a2bab" class="outline-3">
<h3 id="orga8a2bab"><span class="section-number-3">1.15.</span> Evaluation</h3>
<div class="outline-text-3" id="text-1-15">
<ul class="org-ul">
<li>funcall<br></li>
<li>apply<br></li>
<li>eval<br></li>
</ul>
</div>
</div>

<div id="outline-container-org8e9e3eb" class="outline-3">
<h3 id="org8e9e3eb"><span class="section-number-3">1.16.</span> 3.16 Closure</h3>
<div class="outline-text-3" id="text-1-16">
<ul class="org-ul">
<li><p>
Ex01, c is the captured clojure<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">adder</span> (c)
  <span class="org-doc">"Return a function that adds c to its argument."</span>
  #'(<span class="org-keyword">lambda</span> (x) (+ x c)))
</pre>
</div></li>
<li><p>
Ex02, returns a clojure that can be used as representation of a bank accound.<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">bank-account</span> (balance)
  <span class="org-doc">"Open a bank account starting with the given balance."</span>
  #'(<span class="org-keyword">lambda</span> (action amount)
      (<span class="org-keyword">case</span> action
        (deposit  (setf balance (+ balance amount)))
        (withdraw (setf balance (- balance amount))))))
</pre>
</div></li>
</ul>
</div>
</div>


<div id="outline-container-org210ec37" class="outline-3">
<h3 id="org210ec37"><span class="section-number-3">1.17.</span> 3.17 special variables</h3>
<div class="outline-text-3" id="text-1-17">
<ul class="org-ul">
<li>lexical variables<br>
By default, Common Lisp variables are lexical variables. They are introduced by syntactic construct like let or defun.<br></li>
<li>special variables<br>
<ul class="org-ul">
<li>A variable is made special by <code>defvar</code> or <code>defparameter</code>.<br></li>
<li><p>
It is just like global variable except: the global binding can be shadowed by a local binding for that variable.<br>
</p>
<pre class="example" id="org2cfd9ee">
(defun report ()
  (format t "Counter = ~d" *counter*))

&gt; (report)
Counter = 0
NIL

&gt; (let ((*counter* 100))
    (report))
Counter = 100
NIL

&gt; (report)
Counter = 0
NIL
</pre>
<p>
<b>A lexical variable has lexical scope and indefinite extent. A special variable has indefinite scope and dynamic extent.</b><br>
</p></li>
<li>symbol-value<br>
To set a special variable, the following are equivalent:<br>
<ul class="org-ul">
<li>(setf (symbol-value var) value)<br></li>
<li>(set var value)<br></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>


<div id="outline-container-orgeec0451" class="outline-3">
<h3 id="orgeec0451"><span class="section-number-3">1.18.</span> 3.18 Multiple values</h3>
<div class="outline-text-3" id="text-1-18">
<p>
You can write functions of your own that return multiple values using the function <code>values</code>.<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(values 1 2 3)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c1b1db" class="outline-3">
<h3 id="org7c1b1db"><span class="section-number-3">1.19.</span> 3.19 More about parameters</h3>
<div class="outline-text-3" id="text-1-19">
<p>
Consider how could we improve the following function&rsquo;s signature<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">math-quiz</span> (op range n)
  <span class="org-doc">"Ask the user a series of math problems."</span>
  (<span class="org-keyword">dotimes</span> (i n)
    (problem (random range) op (random range))))

(<span class="org-keyword">defun</span> <span class="org-function-name">problem</span> (x op y)
  <span class="org-doc">"Ask a math problem, read a reply, and say if it is correct."</span>
  (format t <span class="org-string">"~&amp;How much is ~d ~a ~d?"</span> x op y)
  (<span class="org-keyword">if</span> (eql (read) (funcall op x y))
      (princ <span class="org-string">"Correct!"</span>)
      (princ <span class="org-string">"Sorry, that's not right."</span>)))
</pre>
</div>
<p>
The user of math-quiz has to provide all 3 arguments in order, with op is quoted.<br>
</p>
</div>

<div id="outline-container-org43ec9da" class="outline-4">
<h4 id="org43ec9da"><span class="section-number-4">1.19.1.</span> Optional arguments</h4>
<div class="outline-text-4" id="text-1-19-1">
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">math-quiz</span> (<span class="org-type">&amp;optional</span> (op '+) (range 100) (n 10))
  <span class="org-doc">"Ask the user a series of math problems."</span>
  (<span class="org-keyword">dotimes</span> (i n)
    (problem (random range) op (random range))))

(math-quiz)
(math-quiz '+ 100 2)
</pre>
</div>
<p>
Optional arguments are still position dependent.<br>
</p>
</div>
</div>

<div id="outline-container-orgf818b7d" class="outline-4">
<h4 id="orgf818b7d"><span class="section-number-4">1.19.2.</span> Key arguments</h4>
<div class="outline-text-4" id="text-1-19-2">
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">math-quiz</span> (<span class="org-type">&amp;key</span> (op '+) (range 100) (n 10))
  <span class="org-doc">"Ask the user a series of math problems."</span>
  (<span class="org-keyword">dotimes</span> (i n)
    (problem (random range) op (random range))))

(math-quiz <span class="org-builtin">:n</span> 5)
(math-quiz <span class="org-builtin">:op</span> '+ <span class="org-builtin">:n</span> 5 <span class="org-builtin">:range</span> 100)
</pre>
</div>
<ul class="org-ul">
<li>A symbol starting with a <code>:</code> is called a keyword.<br></li>
<li>Keywords are constant, and cannot be used as names of variables.<br></li>
</ul>
</div>
</div>

<div id="outline-container-org2dfd1e7" class="outline-4">
<h4 id="org2dfd1e7"><span class="section-number-4">1.19.3.</span> Summary</h4>
<div class="outline-text-4" id="text-1-19-3">
<ul class="org-ul">
<li><p>
Key vs optional parameters<br>
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">key</th>
<th scope="col" class="org-left">optional</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(math-quiz :op &rsquo;+ :n 5 :range 100)</td>
<td class="org-left">(math-quiz &rsquo;+ 100 2)</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">not fixed order (very useful)</td>
<td class="org-left">fixed order</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li><b>Notice</b>: <code>&amp;rest</code> are used to collect a variable number of arguments. Usually, it is used after <code>&amp;key</code> or <code>optional</code> parameters.<br></li>
</ul></li>
<li>Among the build-in functions, there are two common group of keywords:<br>
<ol class="org-ol">
<li><p>
<code>:test</code>, <code>test-not</code>, <code>key</code>, for matching functions. Including<br>
</p>
<ul class="org-ul">
<li>sublis<br></li>
<li>position<br></li>
<li>subst<br></li>
<li>union<br></li>
<li>intersection<br></li>
<li>set-difference<br></li>
<li>remove<br></li>
<li>remove-if<br></li>
<li>subsetp<br></li>
<li>assoc<br></li>
<li>find<br></li>
<li>member<br></li>
</ul>

<p>
<b>Notice</b>: <code>:key</code> is used to provider a selector function such that the comparison could be make against some part of the object.<br>
</p></li>

<li><code>:start</code>, <code>:end</code>, <code>:from-end</code>, for sequence functions. Including<br>
<ul class="org-ul">
<li>remove<br></li>
<li>remove-if<br></li>
<li>position<br></li>
<li>find<br></li>
</ul></li>
</ol></li>
<li><p>
Example of keyword parameter, find-all which find all the items matching a condition in the list.<br>
</p>
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">find-all</span> (item sequence <span class="org-type">&amp;rest</span> keyword-args
                               <span class="org-type">&amp;key</span> (test #'eql) test-not <span class="org-type">&amp;allow-other-keys</span>)
  <span class="org-doc">"Find all those elements of sequence that match item,</span>
<span class="org-doc">  according to the keywords.  Doesn't alter sequence."</span>
  (<span class="org-keyword">if</span> test-not
      (apply #'remove item sequence
             <span class="org-builtin">:test-not</span> (complement test-not) keyword-args)
      (apply #'remove item sequence
             <span class="org-builtin">:test</span> (complement test) keyword-args)))

(find-all 1 '(1 2 3 1 1 2 3 4 5))

(remove 3 '(1 2 3 4 5 6) <span class="org-builtin">:test</span> #'&gt;)
(remove 3 '(1 2 3 4 5 6) <span class="org-builtin">:test</span> #'&lt;=)

<span class="org-comment-delimiter">;; </span><span class="org-comment">#'&gt; 's complement</span>
(remove 3 '(1 2 3 4 5 6) <span class="org-builtin">:test</span> #'(<span class="org-keyword">lambda</span> (<span class="org-type">&amp;rest</span> args)
                                   (not (apply #'&gt; args))))
</pre>
</div></li>
</ul>
</div>
</div>
</div>
</section>

<section id="outline-container-org37f7800" class="outline-2">
<h2 id="org37f7800"><span class="section-number-2">2.</span> <span class="todo TODO">TODO</span> Exercises</h2>
</section>
</main>
<footer id="postamble" class="status">
<div class='footer'>
  Copyright © 2020 <a href='mailto:hyperion_z@outlook.com'>Zhao Wei.</a><br>
  Inspired by <a href='https://nicolas.petton.fr'>https://nicolas.petton.fr</a> <br>
  Last updated on Jun 16, 2022. Generated using <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="https://orgmode.org">Org</a> mode 9.5.2).
</div>
</footer>
</body>
</html>
